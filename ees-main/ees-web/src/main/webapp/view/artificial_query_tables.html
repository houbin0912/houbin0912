<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- Meta, title, CSS, favicons, etc. -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>用户管理</title>

<!-- Bootstrap -->
<link href="./css/bootstrap.min.css" rel="stylesheet">
<!-- Font Awesome -->
<link href="./css/font-awesome.min.css" rel="stylesheet">
<!-- NProgress -->
<link href="./css/nprogress.css" rel="stylesheet">
<!-- iCheck -->
<link href="./css/green.css" rel="stylesheet">
<!-- Datatables -->
<link href="./css/dataTables.bootstrap.min.css" rel="stylesheet">
<link href="./css/buttons.bootstrap.min.css" rel="stylesheet">
<link href="./css/fixedHeader.bootstrap.min.css" rel="stylesheet">
<link href="./css/responsive.bootstrap.min.css" rel="stylesheet">
<link href="./css/scroller.bootstrap.min.css" rel="stylesheet">

<link href="./css/prettify.min.css" rel="stylesheet">
<link href="./css/select2.min.css" rel="stylesheet">
<link href="./css/switchery.min.css" rel="stylesheet">
<link href="./css/starrr.css" rel="stylesheet">
<link href="./css/daterangepicker.css" rel="stylesheet">

<!-- Custom Theme Style -->
<link href="./css/custom.min.css" rel="stylesheet">
<!-- jQuery -->
<script src="./js/jquery.min.js"></script>
<script src="./js/jquery.validate.min.js"></script>
<script src="./js/messages_zh.js"></script>
<style>
label.error {
	color: red;
}
</style>
<script type="text/javascript">
	$(function() {
		$("#leftMenu").load("left_menu.html");
		$("#top").load("top.html");
	});
</script>
</head>

<body class="nav-md">
	<div class="container body">
		<div class="main_container">
			<!-- 加载主菜单 -->
			<div id="leftMenu"></div>
			<div id="top" class="top_nav" style="height: 58px;background: #EDEDED;"></div>
			<!-- page content -->
			<div class="right_col" role="main">
				<div class="">
					<div class="clearfix"></div>
					<div class="row">
						<div class="col-md-12 col-sm-12 col-xs-12">
							<div class="x_panel">
								<div class="x_title">
									<h2>用户管理</h2>
									<div class="clearfix"></div>
								</div>
								<div class="x_content" style="min-height: 470px">

									<div class="row">
										<form id="queryForm" class="form-horizontal form-label-left"
											novalidate>
											<div class="item form-group">
												<label class="control-label col-md-1 col-sm-1 col-xs-1"
													for="userName">用户名</label>
												<div class="col-md-3 col-sm-3 col-xs-6">
													<input id="query_user_name" class="form-control col-md-7 col-xs-12" type="text">
												</div>

												<label class="control-label col-md-3 col-sm-3 col-xs-3"></label> <label
													class="control-label col-md-1 col-sm-1 col-xs-1">登录名 </label>
												<div class="col-md-3 col-sm-3 col-xs-6">
													<input id="query_login_name" class="form-control col-md-7 col-xs-12">
												</div>
											</div>

											<div class="item form-group">
												<label class="control-label col-md-1 col-sm-1 col-xs-1" >所属机构</label>
												<div class="col-md-3 col-sm-3 col-xs-6">
													<input id="query_belong_org" name="belong_org" class="form-control col-md-7 col-xs-12">
												</div>

												<label class="control-label col-md-3 col-sm-3 col-xs-3"></label>

												<label class="control-label col-md-1 col-sm-1 col-xs-1">所属角色</label>
												<div class="col-md-3 col-sm-3 col-xs-6">
													<input id="query_role_name" name="roleId" class="form-control col-md-7 col-xs-12">
												</div>
											</div>
											<div class="form-group" align="center">
												<div class="col-md-6 col-md-offset-3">
													<button type="reset" class="btn btn-primary">重置</button>
													<button type="button" onclick="query()" class="btn btn-success">提交</button>
												</div>
											</div>
										</form>
										<div class="ln_solid"></div>
									</div>

									<div class="row">
										<div class="col-sm-6">
											<button type="button" onclick="addModel()"
												class="btn btn-primary" style="margin: 1px;">添加</button>
											<button type="button"
												onclick="action('/sys/user/upStatus','启用')"
												class="btn btn-primary" style="margin: 1px;">启用</button>
											<button type="button"
												onclick="action('/sys/user/downStatus','禁用')"
												class="btn btn-primary" style="margin: 1px;">禁用</button>
											<button type="button"
												onclick="action('/sys/user/initPwd','密码重置')"
												class="btn btn-primary" style="margin: 1px;">初始化</button>
											<button type="button"
												onclick="action('/sys/user/deleteByIds','批量删除')"
												class="btn btn-primary" style="margin: 1px;">批量删除</button>
										</div>
									</div>

									<table id="datatable-buttons" style="width: 100%"
										class="table table-striped table-bordered bulk_action">

										<thead>
											<tr>
												<th>序号</th>
												<th>用户名</th>
												<th>昵称</th>
												<th>性别</th>
												<th>所属机构</th>
												<th>所属角色</th>
												<th>状态</th>
												<th>备注</th>
												<th>操作</th>
											</tr>
										</thead>
									</table>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- footer content -->
			<footer>
				<div class="pull-right">
					百信银行
				</div>
				<div class="clearfix"></div>
			</footer>
			<!-- /footer content -->

			<!-- 修改窗口模态框（Modal） -->
			<div style="top: 1%; left: 7%" class="modal fade bs-example-modal-lg"
				id="updateModal" tabindex="-1" role="dialog"
				aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog modal-lg">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal"
								aria-hidden="true">×</button>
							<h4 class="modal-title" id="myModalLabel">修改操作</h4>
						</div>
						<div class="modal-body">
							<form id="updateForm" class="form-horizontal form-label-left"
								novalidate>
								<div class="item form-group" style="display: none;">
									<label class="control-label col-md-3 col-sm-3 col-xs-12">序号 
										<span class="required"style="color: red;">*</span>
									</label>
									<div class="col-md-6 col-sm-6 col-xs-12">
										<input id="updateUserId" class="form-control col-md-7 col-xs-12" name="userId" type="text">
									</div>
								</div>
								<div class="item form-group">
									<label class="control-label col-md-3 col-sm-3 col-xs-12">用户名
										 <span class="required" style="color: red;">*</span>
									</label>
									<div class="col-md-6 col-sm-6 col-xs-12">
										<input id="updateUserName" class="form-control col-md-7 col-xs-12" name="userName" type="text">
									</div>
									<label class="control-label" for="updateUserName"></label>
								</div>
								<div class="item form-group">
									<label class="control-label col-md-3 col-sm-3 col-xs-12">登录名
										 <span class="required" style="color: red;">*</span>
									</label>
									<div class="col-md-6 col-sm-6 col-xs-12">
										<input id="updateLoginName" name="loginName" onblur="isExist()" 
											class="form-control col-md-7 col-xs-12">
									</div>
									<label class="control-label" for="updateLoginName" id="updateLoginNameError"></label>
								</div>
								<div class="item form-group">
									<label 
										class="control-label col-md-3 col-sm-3 col-xs-12">性别 <span
										class="required" style="color: red;">*</span></label>
									<div class="col-md-6 col-sm-6 col-xs-12">
										<select class="form-control" name="sex" id="updateSexSelect"></select>
									</div>
									<label class="control-label" for="updateSexSelect"></label>
								</div>
								<div class="item form-group">
									<label class="control-label col-md-3 col-sm-3 col-xs-12">所属机构
										 <span class="required" style="color: red;">*</span>
									</label>
									<div class="col-md-6 col-sm-6 col-xs-12">
										<select class="form-control" id="updateOrgSelect" name="orgId"
										 	onchange="checkChangeOrg(this.value,'updateOrgIdError',
										 	'updateRoleSelect',)"></select>
									</div>
									<label class="control-label" for="updateOrgSelect" ></label>
								</div>
								<div class="item form-group">
									<label class="control-label col-md-3 col-sm-3 col-xs-12" >所属角色 
										<span class="required" style="color: red;">*</span>
									</label>
									<div class="col-md-6 col-sm-6 col-xs-12">
										<select class="form-control" id="updateRoleSelect" name="roleId"></select>
									</div>
									<label class="control-label" for="updateRoleSelect" ></label>
								</div>

								<div class="item form-group">
									<label class="control-label col-md-3 col-sm-3 col-xs-12">备注 </label>
									<div class="col-md-6 col-sm-6 col-xs-12">
										<textarea id="updateRemark" name="remark" onblur="errorShow(update_num_text)"
											onkeyup="limitMaxLength('updateRemark','update_num_text',500)"
											rows="5" class="form-control col-md-7 col-xs-12"></textarea>
									</div>
									<label class="control-label errorRemark" style="color: red;" id="update_num_text" for="updateRemark">
									</label>
								</div>

								<div class="ln_solid"></div>
								<div class="form-group">
									<div class="col-md-6 col-md-offset-3">
										<button type="button" class="btn btn-primary" data-dismiss="modal" 
											aria-hidden="true">取消</button>
										<button type="submit" onclick="dosubmitUpdate()" id="updateInfo" 
										class="btn btn-success">修改</button>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>

			<!-- 新增窗口模态框（Modal） -->
			<div style="top: 1%; left: 7%" class="modal fade bs-example-modal-lg"
				id="addModal" tabindex="-1" role="dialog"
				aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog modal-lg">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal"
								aria-hidden="true">×</button>
							<h4 class="modal-title" id="myModalLabel">添加操作</h4>
						</div>
						<div class="modal-body">
							<form id="addForm" class="form-horizontal form-label-left" novalidate>
								<div class="item form-group" style="display: none;">
									<label class="control-label col-md-3 col-sm-3 col-xs-12" for="addUserId">序号
									 	<span class="required"style="color: red;">*</span>
									</label>
									<div class="col-md-6 col-sm-6 col-xs-12">
										<input id="addUserId" class="form-control col-md-7 col-xs-12" name="userId" type="text">
									</div>
								</div>
								<div class="item form-group">
									<label class="control-label col-md-3 col-sm-3 col-xs-12">用户名
									 <span class="required" style="color: red;">*</span>
									</label>
									<div class="col-md-6 col-sm-6 col-xs-12">
										<input id="addUserName" class="form-control col-md-7 col-xs-12" 
										name="userName" type="text">
									</div>
									<label class="control-label" for="addUserName"></label>
								</div>
								<div class="item form-group">
									<label class="control-label col-md-3 col-sm-3 col-xs-12">登录名 
										<span class="required" style="color: red;">*</span>
									</label>
									<div class="col-md-6 col-sm-6 col-xs-12">
										<input id="addLoginName" name="loginName" onblur="isExist()"
											class="form-control col-md-7 col-xs-12">
									</div>
									<label class="control-label error" id="addLoginNameError" 
										for="addLoginName"></label>
								</div>
								<div class="item form-group">
									<label class="control-label col-md-3 col-sm-3 col-xs-12">性别 
										<span class="required" style="color: red;">*</span>
									</label>
									<div class="col-md-6 col-sm-6 col-xs-12">
										<select class="form-control" name="sex" id="addSexSelect"></select>
									</div>
									<label class="control-label"  for="addSexSelect" ></label>
								</div>
								<div class="item form-group">
									<label class="control-label col-md-3 col-sm-3 col-xs-12">所属机构 
										<span class="required" style="color: red;">*</span>
									</label>
									<div class="col-md-6 col-sm-6 col-xs-12">
										<select class="form-control" id="addOrgSelect" name="orgId"
											onchange="checkChangeOrg(this.value,'addOrgIdError','addRoleSelect')"></select>
									</div>
									<label class="control-label"  for="addOrgSelect"></label>
								</div>
								<div class="item form-group">
									<label class="control-label col-md-3 col-sm-3 col-xs-12">所属角色 
										<span class="required" style="color: red;">*</span>
									</label>
									<div class="col-md-6 col-sm-6 col-xs-12">
										<select class="form-control" id="addRoleSelect" name="roleId"></select>
									</div>
									<label class="control-label" id="addRoleIdError" for="addRoleSelect"></label>
								</div>

								<div class="item form-group">
									<label class="control-label col-md-3 col-sm-3 col-xs-12" >备注 </label>
									<div class="col-md-6 col-sm-6 col-xs-12">
										<textarea id="addRemark" name="remark"
											onkeyup="limitMaxLength('addRemark','add_num_text',500)"
											rows="5" class="form-control col-md-7 col-xs-12"></textarea>
									</div>
									<label class="control-label errorRemark" style="color: red;" id="add_num_text" for="addRemark"></label>
								</div>

								<div class="ln_solid"></div>
								<div class="form-group">
									<div class="col-md-6 col-md-offset-3">
										<button type="reset" class="btn btn-primary">重置</button>
										<button type="submit" onclick="dosubmitAdd()" id="addInfo" class="btn btn-success">提交</button>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>

			<!-- 模态框（Modal） -->
			<div style="top: 20%;" class="modal fade" id="DeleteModal"
				tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
				aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal"
								aria-hidden="true">×</button>
							<h4 class="modal-title" id="myModalLabel">删除操作</h4>
						</div>
						<div class="modal-body">
							<form name="deleteForm" novalidate>
								<!-- 删除时的id值 -->
								<div class="item form-group" style="display: none;">
									<div class="col-md-6 col-sm-6 col-xs-12">
										<input id="delete_id" class="form-control col-md-7 col-xs-12"
											name="userId" type="hidden">
									</div>
								</div>
								<span>此操作不可逆，确定删除吗?</span>

								<div class="modal-footer">
									<button type="button" class="btn btn-default" data-dismiss="modal">
										关闭
									</button>
									<button type="button" onclick="delOne()" class="btn btn-danger">
										确定
									</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>

			<!-- 模态框（Modal） -->
			<div style="top: 20%;" class="modal fade" id="editPasswordModal"
				tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
				aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal"
								aria-hidden="true">×</button>
							<h4 class="modal-title" id="myModalLabel">密码修改操作</h4>
						</div>
						<div class="modal-body">
							<form novalidate>
								<!-- 密码修改时的id值 -->
								<div class="item form-group" style="display: none;">
									<div class="col-md-6 col-sm-6 col-xs-12">
										<input id="editPasswordId" name="userId" 
											class="form-control col-md-7 col-xs-12" type="hidden">
									</div>
								</div>
								<h5>此操作不可逆，确定修改吗?</h5>
								<div class="item form-group">
									<div class="col-md-10 col-sm-10 col-xs-12">
										<input id="editNewPassword" name="password"
											class="form-control col-md-7 col-xs-12" 
											required="required" type="text">
									</div>
								</div>
								<button type="button" onclick="editPassword()" class="btn btn-danger">
									确定
								</button>
							</form>
						</div>
					</div>
				</div>
			</div>

			<!-- 模态框（Modal） -->
			<div style="top: 20%;" class="modal fade" id="infoModel"
				tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
				aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal"
								aria-hidden="true">×</button>
							<h4 class="modal-title" id="myModalLabel">友情提示</h4>
						</div>
						<div class="modal-body">
							<label id="infoAction" style="color: red; font-size: large;"></label>
						</div>
					</div>
				</div>
			</div>
		</div>
		
	</div>

	<!-- Bootstrap -->
	<script src="./js/bootstrap.js"></script>
	<!-- FastClick -->
	<script src="./js/fastclick.js"></script>
	<!-- NProgress -->
	<script src="./js/nprogress.js"></script>
	<!-- iCheck -->
	<script src="./js/icheck.min.js"></script>
	<!-- Datatables -->
	<script src="./js/jquery.dataTables.min.js"></script>
	<script src="./js/dataTables.bootstrap.min.js"></script>
	<script src="./js/dataTables.buttons.min.js"></script>
	<script src="./js/buttons.bootstrap.min.js"></script>
	<script src="./js/buttons.flash.min.js"></script>
	<script src="./js/buttons.html5.min.js"></script>
	<script src="./js/buttons.print.min.js"></script>
	<script src="./js/dataTables.fixedHeader.min.js"></script>
	<script src="./js/dataTables.keyTable.min.js"></script>
	<script src="./js/dataTables.responsive.min.js"></script>
	<script src="./js/responsive.bootstrap.js"></script>
	<script src="./js/dataTables.scroller.min.js"></script>
	<script src="./js/jszip.min.js"></script>
	<script src="./js/pdfmake.min.js"></script>
	<script src="./js/vfs_fonts.js"></script>

	<script src="./js/bootstrap-progressbar.min.js"></script>
	<script src="./js/moment.min.js"></script>
	<script src="./js/daterangepicker.js"></script>
	<script src="./js/bootstrap-wysiwyg.min.js"></script>
	<script src="./js/jquery.hotkeys.js"></script>
	<script src="./js/prettify.js"></script>
	<script src="./js/jquery.tagsinput.js"></script>
	<script src="./js/switchery.min.js"></script>
	<script src="./js/select2.full.min.js"></script>
	<script src="./js/parsley.min.js"></script>
	<script src="./js/autosize.min.js"></script>
	<script src="./js/jquery.autocomplete.min.js"></script>
	<script src="./js/starrr.js"></script>
	<script src="./js/ees-common.js"></script>
	<script src="./js/ees-user.js"></script>
	<!-- Custom Theme Scripts -->
	<script src="./js/custom.js"></script>

</body>
</html>